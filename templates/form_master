


<metal:block metal:define-macro="text_widget">
<tr>
  <td><strong tal:content="slot_pretty_name">slot_name</strong></td>
  <td>
  <tal:block condition="exists:slot_value">
    <input 
       type="text" 
       name="" 
       value=""
       tal:attributes="name slot_name;
                       value slot_value" 
       size="31"/>
  </tal:block>
  <tal:block condition="not:exists:slot_value">
    <input 
       type="text" 
       name="" 
       tal:attributes="name slot_name" 
       size="31"/>
  </tal:block>

  </td>
</tr>
</metal:block>




<metal:block metal:define-macro="auto_widget">
<tal:block 
  define="svt python:get_slot_values(slot_name,
                                     ':SLOT-VALUE-TYPE')[0];
          slot_value_type python:svt and str(svt[0]) or ':INTEGER'">

  <tr>
    <td valign="top">
       <strong tal:content="slot_pretty_name">slot_name</strong>
       <br/>
       <em tal:content="slot_value_type"></em>
    </td>
    <td>
  <tal:block condition="python:slot_value_type == ':STRING'">
  <input type="text" name="" tal:attributes="name slot_name" size="31"/>
  </tal:block>

  <tal:block condition="python:slot_value_type == ':INTEGER'">
  <input type="text" name="" tal:attributes="name slot_name"/>
  </tal:block>

  <tal:block condition="python:slot_value_type != None and
                               not (slot_value_type in [':INTEGER',
                                                        ':STRING'])">
    <tal:dummy 
      define="slot_cardinality python:get_slot_value(slot_name,
                                                     ':SLOT-CARDINALITY')[0];
              slot_collection_type python:get_slot_value(slot_name,
                                                     ':SLOT-COLLECTION-TYPE')[0];
              select_size python:slot_cardinality != None and 
                                   slot_cardinality > 1 and 5
                                 or slot_collection_type != None and 5
                                 or 1;
              options python:get_class_instances(slot_value_type)[0];
              multiple python:(slot_cardinality != None and 
                               slot_cardinality > 1 and 'multiple') or 
                              (slot_collection_type and 'multiple') or '';
              size python:len(options) > select_size and select_size
                                   or len(options)">

    <tal:dummy 
        replace="structure string:<select name=&quot;$slot_name&quot; $multiple size=&quot;$size&quot;>"/>

      <option 
          tal:repeat="opt options" 
          tal:content="opt">
      </option>


    <tal:dummy replace="structure string:</select>"/>
    </tal:dummy>
  </tal:block>


    </td>
  </tr>
</tal:block>

</metal:block>


$Id: form_master,v 1.4 2003/02/27 18:26:19 smurp Exp $ <a href="/templates/form_master">Show Source</a>
